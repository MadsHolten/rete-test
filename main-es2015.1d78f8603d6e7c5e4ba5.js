(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,n,e){t.exports=e("zUnb")},zUnb:function(t,n,e){"use strict";e.r(n);var o=e("fXoL"),i=e("jhN1"),s=e("mrSG"),u=e("9dUG"),r=e("G+JA"),a=e("G2QI"),c=e("JLln"),d=e("3vII");const l=new u.g("Number value");new u.g("Unit");var p=e("2JGe"),b=e("ofXK"),h=e("3Pt+");function g(t,n){if(1&t&&(o.Jb(0,"div",4),o.Jb(1,"label"),o.gc(2),o.Ib(),o.Ib()),2&t){const t=o.Sb();o.ub(2),o.hc(t.label)}}function m(t,n){if(1&t&&o.Fb(0,"option",9),2&t){const t=n.$implicit;o.Xb("value",t.value)("innerHtml",t.displayName,o.bc)}}function f(t,n){if(1&t){const t=o.Kb();o.Jb(0,"select",7),o.Qb("ngModelChange",(function(n){return o.ac(t),o.Sb(2).unit=n}))("change",(function(){return o.ac(t),o.Sb(2).onUnitChange()})),o.fc(1,m,1,2,"option",8),o.Ib()}if(2&t){const t=o.Sb(2);o.Xb("ngModel",t.unit)("disabled",t.readonly),o.ub(1),o.Xb("ngForOf",t.unitOptions)}}function v(t,n){if(1&t&&(o.Jb(0,"span",5),o.fc(1,f,2,3,"select",6),o.Ib()),2&t){const t=o.Sb();o.ub(1),o.Xb("ngIf",t.unitOptions)}}var w=function(t){return t.VolumeFlow="volumeFlow",t}({});let y=(()=>{class t{constructor(){this.label="Label"}ngOnInit(){this.mounted(),this.unit&&(this.previousUnit=this.unit),this.quantityKind&&this.quantityKind==w.VolumeFlow&&(this.unitOptions=[{value:"m3/h",displayName:"m&sup3;/h"},{value:"m3/min",displayName:"m&sup3;/min"},{value:"l/s",displayName:"l/s"},{value:"l/min",displayName:"l/min"}])}onUnitChange(){const t=p.UcumLhcUtils.getInstance().convertUnitTo(this.previousUnit,this.value,this.unit);"succeeded"==t.status&&(this.value=t.toVal),this.onValueChange(),this.previousUnit=this.unit}onValueChange(){this.change({num:this.value,unit:this.unit})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.yb({type:t,selectors:[["ng-component"]],inputs:{value:"value",label:"label",unit:"unit",quantityKind:"quantityKind",readonly:"readonly",change:"change",mounted:"mounted"},decls:4,vars:4,consts:[["fxLayout","row",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex","grow","type","number",3,"ngModel","readonly","ngModelChange","change"],["fxFlex","20px",4,"ngIf"],["fxLayout","row"],["fxFlex","20px"],["class","select-css",3,"ngModel","disabled","ngModelChange","change",4,"ngIf"],[1,"select-css",3,"ngModel","disabled","ngModelChange","change"],[3,"value","innerHtml",4,"ngFor","ngForOf"],[3,"value","innerHtml"]],template:function(t,n){1&t&&(o.fc(0,g,3,1,"div",0),o.Jb(1,"div",1),o.Jb(2,"input",2),o.Qb("ngModelChange",(function(t){return n.value=t}))("change",(function(){return n.onValueChange()})),o.Ib(),o.fc(3,v,2,1,"span",3),o.Ib()),2&t&&(o.Xb("ngIf",n.label),o.ub(2),o.Xb("ngModel",n.value)("readonly",n.readonly),o.ub(1),o.Xb("ngIf",n.unit))},directives:[b.e,h.i,h.a,h.e,h.g,h.j,b.d,h.h,h.k],styles:["input[_ngcontent-%COMP%]{border-radius:30px;background-color:#fff;border:1px solid #999;font-size:110%;width:100px;box-sizing:border-box}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{padding:2px 6px}label[_ngcontent-%COMP%]{font-size:1em;color:#fff}select[_ngcontent-%COMP%]{border-radius:30px;background-color:#fff;padding:2px 6px;border:1px solid #999;font-size:110%;width:90px;box-sizing:border-box}"]}),t})();class x extends u.b{constructor(t,n,e=!1,o){super(n),this.emitter=t,this.key=n,this.component=y,this.props={readonly:e,change:t=>this.onChange(t),value:0,label:"Luftvolumenstr\xf8m",unit:o,quantityKind:w.VolumeFlow,mounted:()=>{this.setValue(+this.getData(n)||0)}}}onChange(t){this.setValue(t.num),this.setUnit(t.unit),this.emitter.trigger("process")}setValue(t){this.props.value=+t,this.putData("num",this.props.value)}setUnit(t){this.props.unit=t,this.putData("unit",this.props.unit)}}class C extends u.a{constructor(){super("Forbruger"),this.outputUnit="m3/h"}builder(t){const n=new u.f("num","Forbrug",l);return t.addControl(new x(this.editor,"num",!1,t.data.unit)).addOutput(n)}worker(t,n,e){const o=p.UcumLhcUtils.getInstance().convertUnitTo(t.data.unit,t.data.num,this.outputUnit);let i;"succeeded"==o.status&&(i=o.toVal),e.num=i,e.unit=this.outputUnit}}class O extends u.a{constructor(){super("Manifold")}builder(t){return Object(s.a)(this,void 0,void 0,(function*(){const n=new u.d("num","Ind",l,!0),e=new u.f("num","Ud",l);n.addControl(new x(this.editor,"num")),t.addInput(n).addOutput(e)}))}worker(t,n,e){let o=0;n.num.length&&(o=n.num.reduce((t,n)=>t+n)),e.num=o}}class I extends u.a{constructor(){super("Resultat")}builder(t){return Object(s.a)(this,void 0,void 0,(function*(){const n=new u.d("num","Forbrug",l);n.addControl(new x(this.editor,"num")),t.addInput(n).addControl(new x(this.editor,"preview",!0,"m3/h"))}))}worker(t,n,e){const o=n.num.length?n.num[0]:n.num;this.editor.nodes.find(n=>n.id===t.id).controls.get("preview").setValue(o)}}const U=["nodeEditor"];class M{constructor(t,n){this.num=t,this.unit=n||null}}let F=(()=>{class t{constructor(){this.editor=null}ngAfterViewInit(){return Object(s.a)(this,void 0,void 0,(function*(){const t=this.el.nativeElement,n=[new C,new O,new I],e=new u.e("demo@0.2.0",t);e.use(r.a),console.log("AngularRenderPlugin",c.a),e.use(c.a),e.use(a.a);const o=new u.c("demo@0.2.0");n.map(t=>{e.register(t),o.register(t)});const i=yield n[0].createNode(new M(250,"m3/h")),l=yield n[0].createNode(new M(550,"m3/h")),p=yield n[1].createNode(),b=yield n[2].createNode();i.position=[0,200],l.position=[0,400],p.position=[400,300],b.position=[800,300],e.addNode(i),e.addNode(l),e.addNode(p),e.addNode(b),e.connect(i.outputs.get("num"),p.inputs.get("num")),e.connect(l.outputs.get("num"),p.inputs.get("num")),e.connect(p.outputs.get("num"),b.inputs.get("num")),e.on(["process","nodecreated","noderemoved","connectioncreated","connectionremoved"],()=>Object(s.a)(this,void 0,void 0,(function*(){yield o.abort(),yield o.process(e.toJSON())}))),e.view.resize(),e.trigger("process"),d.a.zoomAt(e)}))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.yb({type:t,selectors:[["app-rete"]],viewQuery:function(t,n){var e;1&t&&o.jc(U,!0),2&t&&o.Zb(e=o.Rb())&&(n.el=e.first)},decls:3,vars:0,consts:[[1,"wrapper"],[1,"node-editor"],["nodeEditor",""]],template:function(t,n){1&t&&(o.Jb(0,"div",0),o.Fb(1,"div",1,2),o.Ib())},styles:[".wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.socket.number[_ngcontent-%COMP%]{background:#96b38a}"]}),t})(),N=(()=>{class t{constructor(){this.title="rete-test"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.yb({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){1&t&&o.Fb(0,"app-rete")},directives:[F],styles:[""]}),t})();var k=e("kmnG"),J=e("qFsG");let V=(()=>{class t{}return t.\u0275mod=o.Cb({type:t}),t.\u0275inj=o.Bb({factory:function(n){return new(n||t)},imports:[[b.a,h.c,c.b,k.b,J.a]]}),t})();var L=e("R1ws");let P=(()=>{class t{}return t.\u0275mod=o.Cb({type:t,bootstrap:[N]}),t.\u0275inj=o.Bb({factory:function(n){return new(n||t)},providers:[],imports:[[i.a,V,L.b]]}),t})();Object(o.L)(),i.c().bootstrapModule(P).catch(t=>console.error(t))},zn8P:function(t,n){function e(t){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}))}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id="zn8P"}},[[0,0,5]]]);