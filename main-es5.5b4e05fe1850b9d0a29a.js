function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,o=_getPrototypeOf(e);if(t){var i=_getPrototypeOf(this).constructor;n=Reflect.construct(o,arguments,i)}else n=o.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(e,t,n){e.exports=n("zUnb")},zUnb:function(e,t,n){"use strict";n.r(t);var o=n("fXoL"),i=n("jhN1"),r=n("mrSG"),c=n("9dUG"),a=n("G+JA"),u=n("G2QI"),s=n("JLln"),l=n("3vII"),d=n("wHSu"),f=n("ofXK"),p=n("3Pt+"),g=n("6NWb");function h(e,t){if(1&e){var n=o.Ub();o.Tb(0,"div",6),o.ac("click",(function(){return o.kc(n),o.cc().toggleEditTitleMode()})),o.oc(1),o.Sb()}if(2&e){var i=o.cc();o.Hb(1),o.pc(i.node.name)}}function b(e,t){if(1&e){var n=o.Ub();o.Tb(0,"div"),o.Tb(1,"input",7),o.ac("ngModelChange",(function(e){return o.kc(n),o.cc().node.name=e})),o.Sb(),o.Tb(2,"fa-icon",8),o.ac("click",(function(){return o.kc(n),o.cc().toggleEditTitleMode()})),o.Sb(),o.Sb()}if(2&e){var i=o.cc();o.Hb(1),o.hc("ngModel",i.node.name),o.Hb(1),o.hc("icon",i.faSave)}}function v(e,t){if(1&e&&(o.Tb(0,"div",9),o.Tb(1,"div",10),o.oc(2),o.Sb(),o.Rb(3,"rete-socket",11),o.Sb()),2&e){var n=t.$implicit;o.Hb(2),o.pc(n.name),o.Hb(1),o.hc("io",n)("socket",n.socket)}}function m(e,t){if(1&e&&o.Rb(0,"div",12),2&e){var n=t.$implicit;o.hc("rete-control",n)}}function C(e,t){if(1&e&&(o.Tb(0,"div",16),o.oc(1),o.Sb()),2&e){var n=o.cc().$implicit;o.Hb(1),o.pc(n.name)}}function _(e,t){if(1&e&&o.Rb(0,"div",17),2&e){var n=o.cc().$implicit;o.hc("rete-control",n.control)}}function y(e,t){if(1&e&&(o.Tb(0,"div",13),o.Rb(1,"rete-socket",11),o.nc(2,C,2,1,"div",14),o.nc(3,_,1,1,"div",15),o.Sb()),2&e){var n=t.$implicit;o.Hb(1),o.hc("io",n)("socket",n.socket),o.Hb(1),o.hc("ngIf",!n.showControl()),o.Hb(1),o.hc("ngIf",n.showControl())}}var w=function(e,t){return[e,t]},O=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,o){var i;return _classCallCheck(this,n),(i=t.call(this,e,o)).service=e,i.cdr=o,i.editTitleMode=!1,i.faSave=d.a,i}return _createClass(n,[{key:"toggleEditTitleMode",value:function(){this.editTitleMode=!this.editTitleMode}}]),n}(s.b);O.\u0275fac=function(e){return new(e||O)(o.Qb(s.c),o.Qb(o.h))},O.\u0275cmp=o.Kb({type:O,selectors:[["ng-component"]],features:[o.Gb([s.c]),o.Eb],decls:6,vars:9,consts:[[1,"node",3,"ngClass"],["class","title",3,"click",4,"ngIf"],[4,"ngIf"],["class","output",4,"ngFor","ngForOf"],["class","control",3,"rete-control",4,"ngFor","ngForOf"],["class","input",4,"ngFor","ngForOf"],[1,"title",3,"click"],["type","string",1,"edit-title",3,"ngModel","ngModelChange"],[3,"icon","click"],[1,"output"],[1,"output-title"],["rete-socket","",3,"io","socket"],[1,"control",3,"rete-control"],[1,"input"],["class","input-title",4,"ngIf"],["class","input-control",3,"rete-control",4,"ngIf"],[1,"input-title"],[1,"input-control",3,"rete-control"]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.nc(1,h,2,1,"div",1),o.nc(2,b,3,2,"div",2),o.nc(3,v,4,3,"div",3),o.nc(4,m,1,1,"div",4),o.nc(5,y,4,4,"div",5),o.Sb()),2&e&&(o.hc("ngClass",o.ic(6,w,t.selected(),t.node.name)),o.Hb(1),o.hc("ngIf",!t.editTitleMode||!t.selected()),o.Hb(1),o.hc("ngIf",t.editTitleMode&&t.selected()),o.Hb(1),o.hc("ngForOf",t.outputs),o.Hb(1),o.hc("ngForOf",t.controls),o.Hb(1),o.hc("ngForOf",t.inputs))},directives:[f.c,f.e,f.d,p.a,p.c,p.d,g.a,s.e,s.g,s.f],styles:[".node[_ngcontent-%COMP%]{background:hsla(0,0%,78.4%,.8);border:2px solid #c8c8c8;border-radius:10px;cursor:pointer;min-width:180px;height:auto;padding-bottom:6px;box-sizing:content-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.node[_ngcontent-%COMP%]:hover{background:hsla(0,0%,70.6%,.8)}.node.selected[_ngcontent-%COMP%]{background:#ffd92c;border-color:#e3c000}.node[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;padding:8px}.edit-title[_ngcontent-%COMP%], .node[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;font-family:sans-serif}.edit-title[_ngcontent-%COMP%]{border-radius:30px;background-color:#ffd92c;padding:5px 10px;border:1px solid #fff;font-size:16px;margin-left:5px;margin-top:5px;margin-right:5px;width:80%;box-sizing:border-box}fa-icon[_ngcontent-%COMP%]{color:#fff}.node[_ngcontent-%COMP%]   .output[_ngcontent-%COMP%]{text-align:right}.node[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{text-align:left}.node[_ngcontent-%COMP%]   .input-title[_ngcontent-%COMP%], .node[_ngcontent-%COMP%]   .output-title[_ngcontent-%COMP%]{vertical-align:middle;color:#fff;display:inline-block;font-family:sans-serif;font-size:14px;margin:6px;line-height:24px}.node[_ngcontent-%COMP%]   .input-title[hidden][_ngcontent-%COMP%], .node[_ngcontent-%COMP%]   .output-title[hidden][_ngcontent-%COMP%]{display:none}.node[_ngcontent-%COMP%]   .input-control[_ngcontent-%COMP%]{z-index:1;width:calc(100% - 36px);vertical-align:middle;display:inline-block}.node[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{padding:6px 18px}"],changeDetection:0});var k=new c.g("Number value");new c.g("Unit");var x,M=n("2JGe");function P(e,t){if(1&e&&(o.Tb(0,"div",4),o.Tb(1,"label"),o.oc(2),o.Sb(),o.Sb()),2&e){var n=o.cc();o.Hb(2),o.pc(n.label)}}function T(e,t){if(1&e&&o.Rb(0,"option",9),2&e){var n=t.$implicit;o.hc("value",n.value)("innerHtml",n.displayName,o.lc)}}function S(e,t){if(1&e){var n=o.Ub();o.Tb(0,"select",7),o.ac("ngModelChange",(function(e){return o.kc(n),o.cc(2).unit=e}))("change",(function(){return o.kc(n),o.cc(2).onUnitChange()})),o.nc(1,T,1,2,"option",8),o.Sb()}if(2&e){var i=o.cc(2);o.hc("ngModel",i.unit)("disabled",i.readonly),o.Hb(1),o.hc("ngForOf",i.unitOptions)}}function R(e,t){if(1&e&&(o.Tb(0,"span",5),o.nc(1,S,2,3,"select",6),o.Sb()),2&e){var n=o.cc();o.Hb(1),o.hc("ngIf",n.unitOptions)}}!function(e){e.VolumeFlow="volumeFlow"}(x||(x={}));var I=function(){function e(){_classCallCheck(this,e),this.label="Label"}return _createClass(e,[{key:"ngOnInit",value:function(){this.mounted(),this.unit&&(this.previousUnit=this.unit),this.quantityKind&&this.quantityKind==x.VolumeFlow&&(this.unitOptions=[{value:"m3/h",displayName:"m&sup3;/h"},{value:"m3/min",displayName:"m&sup3;/min"},{value:"l/s",displayName:"l/s"},{value:"l/min",displayName:"l/min"}])}},{key:"onUnitChange",value:function(){var e=M.UcumLhcUtils.getInstance().convertUnitTo(this.previousUnit,this.value,this.unit);"succeeded"==e.status&&(this.value=e.toVal),this.onValueChange(),this.previousUnit=this.unit}},{key:"onValueChange",value:function(){this.change({num:this.value,unit:this.unit})}}]),e}();I.\u0275fac=function(e){return new(e||I)},I.\u0275cmp=o.Kb({type:I,selectors:[["ng-component"]],inputs:{value:"value",label:"label",unit:"unit",quantityKind:"quantityKind",readonly:"readonly",change:"change",mounted:"mounted"},decls:4,vars:4,consts:[["fxLayout","row",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex","grow","type","number",3,"ngModel","readonly","ngModelChange","change"],["fxFlex","20px",4,"ngIf"],["fxLayout","row"],["fxFlex","20px"],["class","select-css",3,"ngModel","disabled","ngModelChange","change",4,"ngIf"],[1,"select-css",3,"ngModel","disabled","ngModelChange","change"],[3,"value","innerHtml",4,"ngFor","ngForOf"],[3,"value","innerHtml"]],template:function(e,t){1&e&&(o.nc(0,P,3,1,"div",0),o.Tb(1,"div",1),o.Tb(2,"input",2),o.ac("ngModelChange",(function(e){return t.value=e}))("change",(function(){return t.onValueChange()})),o.Sb(),o.nc(3,R,2,1,"span",3),o.Sb()),2&e&&(o.hc("ngIf",t.label),o.Hb(2),o.hc("ngModel",t.value)("readonly",t.readonly),o.Hb(1),o.hc("ngIf",t.unit))},directives:[f.e,p.f,p.a,p.c,p.d,p.g,f.d,p.e,p.h],styles:["input[_ngcontent-%COMP%]{border-radius:30px;background-color:#fff;border:1px solid #999;font-size:110%;width:100px;box-sizing:border-box}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{padding:2px 6px}label[_ngcontent-%COMP%]{font-size:1em;color:#fff}select[_ngcontent-%COMP%]{border-radius:30px;background-color:#fff;padding:2px 6px;border:1px solid #999;font-size:110%;width:90px;box-sizing:border-box}"]});var U=function(e){_inherits(n,e);var t=_createSuper(n);function n(e,o){var i,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],c=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,n),(i=t.call(this,o)).emitter=e,i.key=o,i.component=I,i.props={readonly:r,change:function(e){return i.onChange(e)},value:0,label:"Luftvolumenstr\xf8m",unit:c,quantityKind:x.VolumeFlow,mounted:function(){i.setValue(+i.getData(o)||0)}},i}return _createClass(n,[{key:"onChange",value:function(e){this.setValue(e.num),this.setUnit(e.unit),this.emitter.trigger("process")}},{key:"setValue",value:function(e){this.props.value=+e,this.putData("num",this.props.value)}},{key:"setUnit",value:function(e){this.props.unit=e,this.putData("unit",this.props.unit)}}]),n}(c.b),F=function(e){_inherits(n,e);var t=_createSuper(n);function n(){var e;return _classCallCheck(this,n),(e=t.call(this,"Forbruger")).outputUnit="m3/h",e}return _createClass(n,[{key:"builder",value:function(e){var t=new c.f("num","Forbrug",k);return e.addControl(new U(this.editor,"num",!1,e.data.unit)).addOutput(t)}},{key:"worker",value:function(e,t,n){var o,i=M.UcumLhcUtils.getInstance().convertUnitTo(e.data.unit,e.data.num,this.outputUnit);"succeeded"==i.status&&(o=i.toVal),n.num=o,n.unit=this.outputUnit}}]),n}(c.a),H=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"Manifold")}return _createClass(n,[{key:"builder",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new c.d("num","Ind",k,!0),o=new c.f("num","Ud",k),n.addControl(new U(this.editor,"num")),e.addInput(n).addOutput(o);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"worker",value:function(e,t,n){var o=0;t.num.length&&(o=t.num.reduce((function(e,t){return e+t}))),n.num=o}}]),n}(c.a),N=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this,"Resultat")}return _createClass(n,[{key:"builder",value:function(e){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=new c.d("num","Forbrug",k)).addControl(new U(this.editor,"num")),e.addInput(n).addControl(new U(this.editor,"preview",!0,"m3/h"));case 2:case"end":return t.stop()}}),t,this)})))}},{key:"worker",value:function(e,t,n){var o=t.num.length?t.num[0]:t.num;this.editor.nodes.find((function(t){return t.id===e.id})).controls.get("preview").setValue(o)}}]),n}(c.a),z=["nodeEditor"],j=function e(t,n){_classCallCheck(this,e),this.num=t,this.unit=n||null},V=function(){function e(){_classCallCheck(this,e),this.editor=null}return _createClass(e,[{key:"ngAfterViewInit",value:function(){return Object(r.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,o,i,d,f,p,g,h=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.el.nativeElement,n=[new F,new H,new N],(o=new c.e("demo@0.2.0",t)).use(a.a),console.log("AngularRenderPlugin",s.a),o.use(s.a,{component:O}),o.use(u.a),i=new c.c("demo@0.2.0"),n.map((function(e){o.register(e),i.register(e)})),e.next=6,n[0].createNode(new j(250,"m3/h"));case 6:return d=e.sent,e.next=9,n[0].createNode(new j(550,"m3/h"));case 9:return f=e.sent,e.next=12,n[1].createNode();case 12:return p=e.sent,e.next=15,n[2].createNode();case 15:g=e.sent,d.position=[0,200],f.position=[0,400],p.position=[400,300],g.position=[800,300],o.addNode(d),o.addNode(f),o.addNode(p),o.addNode(g),o.connect(d.outputs.get("num"),p.inputs.get("num")),o.connect(f.outputs.get("num"),p.inputs.get("num")),o.connect(p.outputs.get("num"),g.inputs.get("num")),o.on(["process","nodecreated","noderemoved","connectioncreated","connectionremoved"],(function(){return Object(r.a)(h,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.abort();case 2:return e.next=4,i.process(o.toJSON());case 4:case"end":return e.stop()}}),e)})))})),o.view.resize(),o.trigger("process"),l.a.zoomAt(o);case 17:case"end":return e.stop()}}),e,this)})))}}]),e}();V.\u0275fac=function(e){return new(e||V)},V.\u0275cmp=o.Kb({type:V,selectors:[["app-rete"]],viewQuery:function(e,t){var n;1&e&&o.qc(z,!0),2&e&&o.jc(n=o.bc())&&(t.el=n.first)},decls:3,vars:0,consts:[[1,"wrapper"],[1,"node-editor"],["nodeEditor",""]],template:function(e,t){1&e&&(o.Tb(0,"div",0),o.Rb(1,"div",1,2),o.Sb())},styles:[".wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.socket.number[_ngcontent-%COMP%]{background:#96b38a}"]});var E=function e(){_classCallCheck(this,e),this.title="rete-test"};E.\u0275fac=function(e){return new(e||E)},E.\u0275cmp=o.Kb({type:E,selectors:[["app-root"]],decls:1,vars:0,template:function(e,t){1&e&&o.Rb(0,"app-rete")},directives:[V],styles:[""]});var L=function e(){_classCallCheck(this,e)};L.\u0275mod=o.Ob({type:L}),L.\u0275inj=o.Nb({factory:function(e){return new(e||L)},imports:[[f.a,p.b,s.d,g.b]]});var K=n("R1ws"),D=function e(){_classCallCheck(this,e)};D.\u0275mod=o.Ob({type:D,bootstrap:[E]}),D.\u0275inj=o.Nb({factory:function(e){return new(e||D)},providers:[],imports:[[i.a,L,K.a]]}),Object(o.Y)(),i.c().bootstrapModule(D).catch((function(e){return console.error(e)}))},zn8P:function(e,t){function n(e){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}))}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="zn8P"}},[[0,0,5]]]);