(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(t,n,e){t.exports=e("zUnb")},zUnb:function(t,n,e){"use strict";e.r(n);var o=e("fXoL");var i=e("jhN1"),s=e("mrSG"),c=e("9dUG"),u=e("G+JA"),r=e("G2QI"),a=e("JLln"),d=e("3vII");const l=new c.g("Number value");new c.g("Unit");var p,h=e("2JGe"),g=e("ofXK"),m=e("3Pt+");function b(t,n){if(1&t&&(o.bc(0,"div",4),o.bc(1,"label"),o.yc(2),o.ac(),o.ac()),2&t){const t=o.kc();o.Mb(2),o.zc(t.label)}}function f(t,n){if(1&t&&o.Xb(0,"option",9),2&t){const t=n.$implicit;o.pc("value",t.value)("innerHtml",t.displayName,o.tc)}}function v(t,n){if(1&t){const t=o.cc();o.bc(0,"select",7),o.ic("ngModelChange",(function(n){return o.sc(t),o.kc(2).unit=n}))("change",(function(){return o.sc(t),o.kc(2).onUnitChange()})),o.xc(1,f,1,2,"option",8),o.ac()}if(2&t){const t=o.kc(2);o.pc("ngModel",t.unit)("disabled",t.readonly),o.Mb(1),o.pc("ngForOf",t.unitOptions)}}function w(t,n){if(1&t&&(o.bc(0,"span",5),o.xc(1,v,2,3,"select",6),o.ac()),2&t){const t=o.kc();o.Mb(1),o.pc("ngIf",t.unitOptions)}}!function(t){t.VolumeFlow="volumeFlow"}(p||(p={}));class y{constructor(){this.label="Label"}ngOnInit(){this.mounted(),this.unit&&(this.previousUnit=this.unit),this.quantityKind&&this.quantityKind==p.VolumeFlow&&(this.unitOptions=[{value:"m3/h",displayName:"m&sup3;/h"},{value:"m3/min",displayName:"m&sup3;/min"},{value:"l/s",displayName:"l/s"},{value:"l/min",displayName:"l/min"}])}onUnitChange(){const t=h.UcumLhcUtils.getInstance().convertUnitTo(this.previousUnit,this.value,this.unit);"succeeded"==t.status&&(this.value=t.toVal),this.onValueChange(),this.previousUnit=this.unit}onValueChange(){this.change({num:this.value,unit:this.unit})}}y.\u0275fac=function(t){return new(t||y)},y.\u0275cmp=o.Qb({type:y,selectors:[["ng-component"]],inputs:{value:"value",label:"label",unit:"unit",quantityKind:"quantityKind",readonly:"readonly",change:"change",mounted:"mounted"},decls:4,vars:4,consts:[["fxLayout","row",4,"ngIf"],["fxLayout","row","fxLayoutAlign","space-between center"],["fxFlex","grow","type","number",3,"ngModel","readonly","ngModelChange","change"],["fxFlex","20px",4,"ngIf"],["fxLayout","row"],["fxFlex","20px"],["class","select-css",3,"ngModel","disabled","ngModelChange","change",4,"ngIf"],[1,"select-css",3,"ngModel","disabled","ngModelChange","change"],[3,"value","innerHtml",4,"ngFor","ngForOf"],[3,"value","innerHtml"]],template:function(t,n){1&t&&(o.xc(0,b,3,1,"div",0),o.bc(1,"div",1),o.bc(2,"input",2),o.ic("ngModelChange",(function(t){return n.value=t}))("change",(function(){return n.onValueChange()})),o.ac(),o.xc(3,w,2,1,"span",3),o.ac()),2&t&&(o.pc("ngIf",n.label),o.Mb(2),o.pc("ngModel",n.value)("readonly",n.readonly),o.Mb(1),o.pc("ngIf",n.unit))},directives:[g.e,m.i,m.a,m.e,m.g,m.j,g.d,m.h,m.k],styles:["input[_ngcontent-%COMP%]{border-radius:30px;background-color:#fff;border:1px solid #999;font-size:110%;width:100px;box-sizing:border-box}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{padding:2px 6px}label[_ngcontent-%COMP%]{font-size:1em;color:#fff}select[_ngcontent-%COMP%]{border-radius:30px;background-color:#fff;padding:2px 6px;border:1px solid #999;font-size:110%;width:90px;box-sizing:border-box}"]});class x extends c.b{constructor(t,n,e=!1,o){super(n),this.emitter=t,this.key=n,this.component=y,this.props={readonly:e,change:t=>this.onChange(t),value:0,label:"Luftvolumenstr\xf8m",unit:o,quantityKind:p.VolumeFlow,mounted:()=>{this.setValue(+this.getData(n)||0)}}}onChange(t){this.setValue(t.num),this.setUnit(t.unit),this.emitter.trigger("process")}setValue(t){this.props.value=+t,this.putData("num",this.props.value)}setUnit(t){this.props.unit=t,this.putData("unit",this.props.unit)}}class M extends c.a{constructor(){super("Forbruger"),this.outputUnit="m3/h"}builder(t){const n=new c.f("num","Forbrug",l);return t.addControl(new x(this.editor,"num",!1,t.data.unit)).addOutput(n)}worker(t,n,e){const o=h.UcumLhcUtils.getInstance().convertUnitTo(t.data.unit,t.data.num,this.outputUnit);let i;"succeeded"==o.status&&(i=o.toVal),e.num=i,e.unit=this.outputUnit}}class U extends c.a{constructor(){super("Manifold")}builder(t){return Object(s.a)(this,void 0,void 0,(function*(){const n=new c.d("num","Ind",l,!0),e=new c.f("num","Ud",l);n.addControl(new x(this.editor,"num")),t.addInput(n).addOutput(e)}))}worker(t,n,e){let o=0;n.num.length&&(o=n.num.reduce((t,n)=>t+n)),e.num=o}}class C extends c.a{constructor(){super("Resultat")}builder(t){return Object(s.a)(this,void 0,void 0,(function*(){const n=new c.d("num","Forbrug",l);n.addControl(new x(this.editor,"num")),t.addInput(n).addControl(new x(this.editor,"preview",!0,"m3/h"))}))}worker(t,n,e){const o=n.num.length?n.num[0]:n.num;this.editor.nodes.find(n=>n.id===t.id).controls.get("preview").setValue(o)}}const O=["nodeEditor"];class k{constructor(t,n){this.num=t,this.unit=n||null}}class N{constructor(){this.editor=null}ngAfterViewInit(){return Object(s.a)(this,void 0,void 0,(function*(){const t=this.el.nativeElement,n=[new M,new U,new C],e=new c.e("demo@0.2.0",t);e.use(u.a),console.log("AngularRenderPlugin",a.a),e.use(a.a),e.use(r.a);const o=new c.c("demo@0.2.0");n.map(t=>{e.register(t),o.register(t)});const i=yield n[0].createNode(new k(250,"m3/h")),l=yield n[0].createNode(new k(550,"m3/h")),p=yield n[1].createNode(),h=yield n[2].createNode();i.position=[0,200],l.position=[0,400],p.position=[400,300],h.position=[800,300],e.addNode(i),e.addNode(l),e.addNode(p),e.addNode(h),e.connect(i.outputs.get("num"),p.inputs.get("num")),e.connect(l.outputs.get("num"),p.inputs.get("num")),e.connect(p.outputs.get("num"),h.inputs.get("num")),e.on(["process","nodecreated","noderemoved","connectioncreated","connectionremoved"],()=>Object(s.a)(this,void 0,void 0,(function*(){yield o.abort(),yield o.process(e.toJSON())}))),e.view.resize(),e.trigger("process"),d.a.zoomAt(e)}))}}N.\u0275fac=function(t){return new(t||N)},N.\u0275cmp=o.Qb({type:N,selectors:[["app-rete"]],viewQuery:function(t,n){var e;(1&t&&o.Bc(O,!0),2&t)&&(o.rc(e=o.jc())&&(n.el=e.first))},decls:3,vars:0,consts:[[1,"wrapper"],[1,"node-editor"],["nodeEditor",""]],template:function(t,n){1&t&&(o.bc(0,"div",0),o.Xb(1,"div",1,2),o.ac())},styles:[".wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.socket.number[_ngcontent-%COMP%]{background:#96b38a}"]});class I{constructor(){this.title="rete-test"}}I.\u0275fac=function(t){return new(t||I)},I.\u0275cmp=o.Qb({type:I,selectors:[["app-root"]],decls:1,vars:0,template:function(t,n){1&t&&o.Xb(0,"app-rete")},directives:[N],styles:[""]});var F=e("kmnG"),V=e("qFsG");class z{}z.\u0275mod=o.Ub({type:z}),z.\u0275inj=o.Tb({factory:function(t){return new(t||z)},imports:[[g.a,m.c,a.b,F.b,V.a]]});var P=e("R1ws");class L{}L.\u0275mod=o.Ub({type:L,bootstrap:[I]}),L.\u0275inj=o.Tb({factory:function(t){return new(t||L)},providers:[],imports:[[i.a,z,P.b]]}),Object(o.cb)(),i.c().bootstrapModule(L).catch(t=>console.error(t))},zn8P:function(t,n){function e(t){return Promise.resolve().then((function(){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}))}e.keys=function(){return[]},e.resolve=e,t.exports=e,e.id="zn8P"}},[[0,0,5]]]);