(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{0:function(n,t,e){n.exports=e("zUnb")},zUnb:function(n,t,e){"use strict";e.r(t);var o=e("fXoL");var i=e("jhN1"),c=e("mrSG"),s=e("9dUG"),r=e("G+JA"),d=e("G2QI"),l=e("JLln"),u=e("3vII"),a=e("wHSu"),p=e("ofXK"),g=e("3Pt+"),b=e("6NWb");function h(n,t){if(1&n){const n=o.Ub();o.Tb(0,"div",6),o.Tb(1,"span",7),o.ac("click",(function(){return o.kc(n),o.cc().toggleEditTitleMode()})),o.oc(2),o.Sb(),o.Sb()}if(2&n){const n=o.cc();o.Hb(2),o.pc(n.node.name)}}function f(n,t){if(1&n){const n=o.Ub();o.Tb(0,"div"),o.Tb(1,"input",8),o.ac("ngModelChange",(function(t){return o.kc(n),o.cc().node.name=t})),o.Sb(),o.Tb(2,"fa-icon",9),o.ac("click",(function(){return o.kc(n),o.cc().toggleEditTitleMode()})),o.Sb(),o.Sb()}if(2&n){const n=o.cc();o.Hb(1),o.hc("ngModel",n.node.name),o.Hb(1),o.hc("icon",n.faSave)}}function m(n,t){if(1&n&&(o.Tb(0,"div",10),o.Tb(1,"div",11),o.oc(2),o.Sb(),o.Rb(3,"rete-socket",12),o.Sb()),2&n){const n=t.$implicit;o.Hb(2),o.pc(n.name),o.Hb(1),o.hc("io",n)("socket",n.socket)}}function v(n,t){if(1&n&&o.Rb(0,"div",13),2&n){const n=t.$implicit;o.hc("rete-control",n)}}function O(n,t){if(1&n&&(o.Tb(0,"div",17),o.oc(1),o.Sb()),2&n){const n=o.cc().$implicit;o.Hb(1),o.pc(n.name)}}function M(n,t){if(1&n&&o.Rb(0,"div",18),2&n){const n=o.cc().$implicit;o.hc("rete-control",n.control)}}function w(n,t){if(1&n&&(o.Tb(0,"div",14),o.Rb(1,"rete-socket",12),o.nc(2,O,2,1,"div",15),o.nc(3,M,1,1,"div",16),o.Sb()),2&n){const n=t.$implicit;o.Hb(1),o.hc("io",n)("socket",n.socket),o.Hb(1),o.hc("ngIf",!n.showControl()),o.Hb(1),o.hc("ngIf",n.showControl())}}const C=function(n,t){return[n,t]};class x extends l.b{constructor(n,t){super(n,t),this.service=n,this.cdr=t,this.editTitleMode=!1,this.faSave=a.a}toggleEditTitleMode(){this.editTitleMode=!this.editTitleMode}}x.\u0275fac=function(n){return new(n||x)(o.Qb(l.c),o.Qb(o.h))},x.\u0275cmp=o.Kb({type:x,selectors:[["ng-component"]],features:[o.Gb([l.c]),o.Eb],decls:6,vars:9,consts:[[1,"node",3,"ngClass"],["class","title",4,"ngIf"],[4,"ngIf"],["class","output",4,"ngFor","ngForOf"],["class","control",3,"rete-control",4,"ngFor","ngForOf"],["class","input",4,"ngFor","ngForOf"],[1,"title"],[3,"click"],["type","string",1,"edit-title",3,"ngModel","ngModelChange"],[3,"icon","click"],[1,"output"],[1,"output-title"],["rete-socket","",3,"io","socket"],[1,"control",3,"rete-control"],[1,"input"],["class","input-title",4,"ngIf"],["class","input-control",3,"rete-control",4,"ngIf"],[1,"input-title"],[1,"input-control",3,"rete-control"]],template:function(n,t){1&n&&(o.Tb(0,"div",0),o.nc(1,h,3,1,"div",1),o.nc(2,f,3,2,"div",2),o.nc(3,m,4,3,"div",3),o.nc(4,v,1,1,"div",4),o.nc(5,w,4,4,"div",5),o.Sb()),2&n&&(o.hc("ngClass",o.ic(6,C,t.selected(),t.node.name)),o.Hb(1),o.hc("ngIf",!t.editTitleMode||!t.selected()),o.Hb(1),o.hc("ngIf",t.editTitleMode&&t.selected()),o.Hb(1),o.hc("ngForOf",t.outputs),o.Hb(1),o.hc("ngForOf",t.controls),o.Hb(1),o.hc("ngForOf",t.inputs))},directives:[p.c,p.e,p.d,g.a,g.c,g.d,b.a,l.e,l.g,l.f],styles:[".node[_ngcontent-%COMP%]{background:hsla(0,0%,78.4%,.8);border:2px solid #c8c8c8;border-radius:10px;cursor:pointer;min-width:180px;height:auto;padding-bottom:6px;box-sizing:content-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.node[_ngcontent-%COMP%]:hover{background:hsla(0,0%,70.6%,.8)}.node.selected[_ngcontent-%COMP%]{background:#ffd92c;border-color:#e3c000}.node[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:18px;padding:8px}.edit-title[_ngcontent-%COMP%], .node[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{color:#fff;font-family:sans-serif}.edit-title[_ngcontent-%COMP%]{border-radius:30px;background-color:#ffd92c;padding:5px 10px;border:1px solid #fff;font-size:16px;margin-left:5px;margin-top:5px;margin-right:5px;width:80%;box-sizing:border-box}fa-icon[_ngcontent-%COMP%]{color:#fff}.node[_ngcontent-%COMP%]   .output[_ngcontent-%COMP%]{text-align:right}.node[_ngcontent-%COMP%]   .input[_ngcontent-%COMP%]{text-align:left}.node[_ngcontent-%COMP%]   .input-title[_ngcontent-%COMP%], .node[_ngcontent-%COMP%]   .output-title[_ngcontent-%COMP%]{vertical-align:middle;color:#fff;display:inline-block;font-family:sans-serif;font-size:14px;margin:6px;line-height:24px}.node[_ngcontent-%COMP%]   .input-title[hidden][_ngcontent-%COMP%], .node[_ngcontent-%COMP%]   .output-title[hidden][_ngcontent-%COMP%]{display:none}.node[_ngcontent-%COMP%]   .input-control[_ngcontent-%COMP%]{z-index:1;width:calc(100% - 36px);vertical-align:middle;display:inline-block}.node[_ngcontent-%COMP%]   .control[_ngcontent-%COMP%]{padding:6px 18px}"],changeDetection:0});const y=new s.g("Number value");new s.g("Unit");var P,k=e("2JGe");function _(n,t){if(1&n&&(o.Tb(0,"div"),o.Tb(1,"label"),o.oc(2),o.Sb(),o.Sb()),2&n){const n=o.cc();o.Hb(2),o.pc(n.label)}}function T(n,t){if(1&n&&o.Rb(0,"option",5),2&n){const n=t.$implicit;o.hc("value",n.value)("innerHtml",n.displayName,o.lc)}}function U(n,t){if(1&n){const n=o.Ub();o.Tb(0,"select",3),o.ac("ngModelChange",(function(t){return o.kc(n),o.cc(2).unit=t}))("change",(function(){return o.kc(n),o.cc(2).onUnitChange()})),o.nc(1,T,1,2,"option",4),o.Sb()}if(2&n){const n=o.cc(2);o.hc("ngModel",n.unit)("disabled",n.readonly),o.Hb(1),o.hc("ngForOf",n.unitOptions)}}function H(n,t){if(1&n&&(o.Tb(0,"span"),o.nc(1,U,2,3,"select",2),o.Sb()),2&n){const n=o.cc();o.Hb(1),o.hc("ngIf",n.unitOptions)}}!function(n){n.VolumeFlow="volumeFlow"}(P||(P={}));class I{constructor(){this.label="Label"}ngOnInit(){this.mounted(),this.unit&&(this.previousUnit=this.unit),this.quantityKind&&this.quantityKind==P.VolumeFlow&&(this.unitOptions=[{value:"m3/h",displayName:"m&sup3;/h"},{value:"m3/min",displayName:"m&sup3;/min"},{value:"l/s",displayName:"l/s"},{value:"l/min",displayName:"l/min"}])}onUnitChange(){const n=k.UcumLhcUtils.getInstance().convertUnitTo(this.previousUnit,this.value,this.unit);"succeeded"==n.status&&(this.value=n.toVal),this.onValueChange(),this.previousUnit=this.unit}onValueChange(){this.change({num:this.value,unit:this.unit})}}I.\u0275fac=function(n){return new(n||I)},I.\u0275cmp=o.Kb({type:I,selectors:[["ng-component"]],inputs:{value:"value",label:"label",unit:"unit",quantityKind:"quantityKind",readonly:"readonly",change:"change",mounted:"mounted"},decls:3,vars:4,consts:[[4,"ngIf"],["type","number",3,"ngModel","readonly","ngModelChange","change"],["class","select-css",3,"ngModel","disabled","ngModelChange","change",4,"ngIf"],[1,"select-css",3,"ngModel","disabled","ngModelChange","change"],[3,"value","innerHtml",4,"ngFor","ngForOf"],[3,"value","innerHtml"]],template:function(n,t){1&n&&(o.nc(0,_,3,1,"div",0),o.Tb(1,"input",1),o.ac("ngModelChange",(function(n){return t.value=n}))("change",(function(){return t.onValueChange()})),o.Sb(),o.nc(2,H,2,1,"span",0)),2&n&&(o.hc("ngIf",t.label),o.Hb(1),o.hc("ngModel",t.value)("readonly",t.readonly),o.Hb(1),o.hc("ngIf",t.unit))},directives:[p.e,g.f,g.a,g.c,g.d,g.g,p.d,g.e,g.h],styles:["input[_ngcontent-%COMP%]{border-radius:30px;background-color:#fff;border:1px solid #999;font-size:110%;width:100px;box-sizing:border-box}input[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{padding:2px 6px}label[_ngcontent-%COMP%]{font-size:1em;color:#fff}select[_ngcontent-%COMP%]{border-radius:30px;background-color:#fff;padding:2px 6px;border:1px solid #999;font-size:110%;width:90px;box-sizing:border-box}"]});class N extends s.b{constructor(n,t,e=!1,o){super(t),this.emitter=n,this.key=t,this.component=I,this.props={readonly:e,change:n=>this.onChange(n),value:0,label:"Volumenstr\xf8m",unit:o,quantityKind:P.VolumeFlow,mounted:()=>{this.setValue(+this.getData(t)||0)}}}onChange(n){this.setValue(n.num),this.emitter.trigger("process")}setValue(n){this.props.value=+n,this.props.unit||(this.props.unit="m3/h"),this.putData("num",this.props.value),this.putData("unit",this.props.unit)}}class S extends s.a{constructor(){super("Forbruger"),this.outputUnit="m3/h"}builder(n){const t=new s.f("num","Forbrug",y);return n.addControl(new N(this.editor,"num",!1,n.data.unit)).addOutput(t)}worker(n,t,e){null==!n.data.unit&&(n.data=new K(0));const o=k.UcumLhcUtils.getInstance().convertUnitTo(n.data.unit,n.data.num,this.outputUnit);let i;"succeeded"==o.status&&(i=o.toVal),e.num=i,e.unit=this.outputUnit}}class F extends s.a{constructor(){super("Manifold")}builder(n){return Object(c.a)(this,void 0,void 0,(function*(){const t=new s.d("num","Ind",y,!0),e=new s.f("num","Ud",y);t.addControl(new N(this.editor,"num")),n.addInput(t).addOutput(e)}))}worker(n,t,e){let o=0;t.num.length&&(o=t.num.reduce((n,t)=>n+t)),e.num=o}}class z extends s.a{constructor(){super("Resultat")}builder(n){return Object(c.a)(this,void 0,void 0,(function*(){const t=new s.d("num","Forbrug",y);t.addControl(new N(this.editor,"num")),n.addInput(t).addControl(new N(this.editor,"preview",!0,"m3/h"))}))}worker(n,t,e){const o=t.num.length?t.num[0]:t.num;this.editor.nodes.find(t=>t.id===n.id).controls.get("preview").setValue(o)}}const V=["nodeEditor"];class K{constructor(n,t){this.num=n,this.unit=t||null}}class R{constructor(){this.editor=null}ngAfterViewInit(){return Object(c.a)(this,void 0,void 0,(function*(){const n=this.el.nativeElement,t=[new S,new F,new z],e=new s.e("demo@0.2.0",n);e.use(r.a),console.log("AngularRenderPlugin",l.a),e.use(l.a,{component:x}),e.use(d.a);const o=new s.c("demo@0.2.0");t.map(n=>{e.register(n),o.register(n)});const i=yield t[0].createNode(new K(250,"m3/h")),a=yield t[0].createNode(new K(550,"m3/h")),p=yield t[1].createNode(),g=yield t[2].createNode();i.position=[0,200],a.position=[0,400],p.position=[400,300],g.position=[800,300],e.addNode(i),e.addNode(a),e.addNode(p),e.addNode(g),e.connect(i.outputs.get("num"),p.inputs.get("num")),e.connect(a.outputs.get("num"),p.inputs.get("num")),e.connect(p.outputs.get("num"),g.inputs.get("num")),e.on(["process","nodecreated","noderemoved","connectioncreated","connectionremoved"],()=>Object(c.a)(this,void 0,void 0,(function*(){yield o.abort(),yield o.process(e.toJSON()),console.log(e.toJSON())}))),e.view.resize(),e.trigger("process"),u.a.zoomAt(e)}))}}R.\u0275fac=function(n){return new(n||R)},R.\u0275cmp=o.Kb({type:R,selectors:[["app-rete"]],viewQuery:function(n,t){var e;(1&n&&o.qc(V,!0),2&n)&&(o.jc(e=o.bc())&&(t.el=e.first))},decls:3,vars:0,consts:[[1,"wrapper"],[1,"node-editor"],["nodeEditor",""]],template:function(n,t){1&n&&(o.Tb(0,"div",0),o.Rb(1,"div",1,2),o.Sb())},styles:[".wrapper[_ngcontent-%COMP%]{width:100%;height:100%}.socket.number[_ngcontent-%COMP%]{background:#96b38a}"]});class j{constructor(){this.title="rete-test"}}j.\u0275fac=function(n){return new(n||j)},j.\u0275cmp=o.Kb({type:j,selectors:[["app-root"]],decls:1,vars:0,template:function(n,t){1&n&&o.Rb(0,"app-rete")},directives:[R],styles:[""]});class E{}E.\u0275mod=o.Ob({type:E}),E.\u0275inj=o.Nb({factory:function(n){return new(n||E)},imports:[[p.a,g.b,l.d,b.b]]});var J=e("R1ws");class q{}q.\u0275mod=o.Ob({type:q,bootstrap:[j]}),q.\u0275inj=o.Nb({factory:function(n){return new(n||q)},providers:[],imports:[[i.a,E,J.a]]}),Object(o.Y)(),i.c().bootstrapModule(q).catch(n=>console.error(n))},zn8P:function(n,t){function e(n){return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+n+"'");throw t.code="MODULE_NOT_FOUND",t}))}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id="zn8P"}},[[0,0,5]]]);